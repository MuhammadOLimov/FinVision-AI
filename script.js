// ==================== TRANSLATIONS ====================
const translations = {
    uz: {
        nav_home: "Bizning maqsadimiz",
        nav_services: "Nima uchun biz",
        nav_projects: "Loyihalar",
        nav_about: "Biz haqimizda",
        nav_contact: "Aloqa",
        nav_roatmap: "Roadmap",
        nav_get_started: "Boshlash",
        
        hero_badge: "Sun'iy intellekt asosidagi Ko'rish tizimlari",
        hero_title_1: "Biznesingizni o'zgartiring",
        hero_title_2: "Aqlli Ko'rish bilan",
        hero_description: "Xavfsizlikni oshirish, samaradorlikni yaxshilash va ma'lumotlarga asoslangan qarorlar qabul qilish uchun mo'ljallangan ilg'or video analitika va kompyuter ko'rish texnologiyasi.",
        hero_btn_start: "Loyihani boshlash",
        hero_btn_learn: "Batafsil",
        
        stat_accuracy: "Aniqlik darajasi",
        stat_monitoring: "Monitoring",
        stat_clients: "Mijozlar",
        stat_hours: "Tahlil qilingan soatlar",
        
        services_title_1: "Nima uchun",
        services_title_2: "biz",
        services_description: "Biznesingiz ehtiyojlariga moslashtirilgan keng qamrovli AI-powered yechimlar",
        
        service_1_title: "Video Analitika",
        service_1_desc: "Real vaqtda tushunchalar va avtomatlashtirilgan monitoring yechimlari uchun AI-powered video tahlil.",
        service_1_feat_1: "✓ Real vaqtda aniqlash",
        service_1_feat_2: "✓ Ob'ektlarni kuzatish",
        service_1_feat_3: "✓ Xatti-harakatni tahlil qilish",
        
        service_2_title: "HR Analitika",
        service_2_desc: "Yaxshilangan HR boshqaruvi uchun ilg'or davomat tizimi va ishchi kuchi analitikasi.",
        service_2_feat_1: "✓ Davomat tizimi",
        service_2_feat_2: "✓ Xodimlar analitikasi",
        service_2_feat_3: "✓ Samaradorlikni kuzatish",
        
        service_3_title: "Xavfsizlik Yechimlari",
        service_3_desc: "Yuz tanish va tahdidlarni aniqlash imkoniyatlariga ega aqlli xavfsizlik tizimlari.",
        service_3_feat_1: "✓ Yuz tanish",
        service_3_feat_2: "✓ Kirish aniqlash",
        service_3_feat_3: "✓ Kirish nazorati",
        
        service_4_title: "Tashrif buyuruvchilar Analitikasi",
        service_4_desc: "Mijozlar tajribasini va operatsiyalarni optimallashtirish uchun tashrif buyuruvchilar naqshlarini kuzatish va tahlil qilish.",
        service_4_feat_1: "✓ Oqim tahlili",
        service_4_feat_2: "✓ Issiqlik xaritalari",
        service_4_feat_3: "✓ Mijozlar tushunchalari",
        
        projects_title_1: "Bizning",
        projects_title_2: "Loyihalarimiz",
        projects_description: "Turli sohalarda ta'sirli yechimlarni taqdim etish",
        
        project_1_category: "Bank sektori",
        project_1_title: "Agrobank Raqamli Yechimlari",
        project_1_desc: "Xizmat sifati va samaradorligini yaxshilash uchun AI-powered mijozlarga xizmat ko'rsatish analitikasi amalga oshirildi.",
        
        project_2_category: "Chakana savdo",
        project_2_title: "Chakana Analitika Platformasi",
        project_2_desc: "Yirik chakana tarmoq uchun keng qamrovli tashrif buyuruvchilar analitika tizimi joylashtirildi.",
        
        project_3_category: "Korporativ xavfsizlik",
        project_3_title: "Korporativ Xavfsizlik Tizimi",
        project_3_desc: "Korporativ bosh ofis uchun ilg'or yuz tanish va kirish nazorati.",
        
        about_title_1: "Biz haqimizda",
        about_text_1: "FinTech Vision Tech kompyuter ko'rish sohasida ilg'or AI mahsulotlarini yaratish va joylashtirishga ixtisoslashgan. Biz samaradorlik, xavfsizlik va biznes aql-zakovatini yaxshilaydigan yangi tizimlarni loyihalash uchun zamonaviy texnologiyani birlashtiramiz.",
        about_text_2: "Bizning missiyamiz ilg'or AI texnologiyasini har qanday o'lchamdagi bizneslar uchun ochiq qilish va ularga maqsadlariga erishishda kompyuter ko'rish kuchidan foydalanishga yordam berishdir.",
        
        tag_1: "AI Innovatsiyasi",
        tag_2: "Kompyuter Ko'rish",
        tag_3: "Biznes Aql-zakovati",
        tag_4: "Xavfsizlik Yechimlari",
        
        value_1_title: "Bizning Ko'zgu'miziz",
        value_1_text: "Global miqyosda AI-powered kompyuter ko'rish yechimlarining etakchi provayderi bo'lish.",
        
        value_2_title: "Bizning Missiyamiz",
        value_2_text: "Aqlli va xavfsiz dunyo uchun aqlli ko'rish texnologiyasi bilan bizneslarni kuchaytirish.",
        
        value_3_title: "Bizning Qadriyatlarimiz",
        value_3_text: "Innovatsiya, Mukammallik, Halollik va Mijozlar Muvaffaqiyati biz qilayotgan hamma narsani boshqaradi.",
        
        contact_title_1: "Bog'laning",
        contact_title_2: "Biz bilan",
        contact_description: "AI-powered ko'rish bilan biznesingizni o'zgartirishga tayyormisiz?",
        
        form_name: "Ismingiz",
        form_email: "Elektron pochtangiz",
        form_subject: "Mavzu",
        form_message: "Xabaringiz",
        form_submit: "Xabar yuborish",
        
        footer_desc: "Zamonaviy bizneslar uchun AI-powered kompyuter ko'rish yechimlari.",
        footer_quick_links: "Tezkor havolalar",
        footer_contact: "Aloqa",
        footer_copyright: "© 2025 Fintech Vision. Barcha huquqlar himoyalangan."
    },
    
    en: {
        nav_home: "Our Target",
        nav_services: "Why Us",
        nav_projects: "Projects",
        nav_about: "About",
        nav_roatmap: "Roadmap",
        nav_contact: "Contact",
        nav_get_started: "Get Started",
        
        hero_badge: "AI-Powered Computer Vision Solutions",
        hero_title_1: "Transform Your Business with",
        hero_title_2: "Intelligent Vision",
        hero_description: "State-of-the-art video analytics and computer vision technology designed to enhance security, improve efficiency, and drive data-driven decisions.",
        hero_btn_start: "Start Your Project",
        hero_btn_learn: "Learn More",
        
        stat_accuracy: "Accuracy Rate",
        stat_monitoring: "Monitoring",
        stat_clients: "Clients",
        stat_hours: "Hours Analyzed",
        
        services_title_1: "Our",
        services_title_2: "Services",
        services_description: "Comprehensive AI-powered solutions tailored to meet your business needs",
        
        service_1_title: "Video Analytics",
        service_1_desc: "AI-powered video analysis for real-time insights and automated monitoring solutions.",
        service_1_feat_1: "✓ Real-time Detection",
        service_1_feat_2: "✓ Object Tracking",
        service_1_feat_3: "✓ Behavior Analysis",
        
        service_2_title: "HR Analytics",
        service_2_desc: "Advanced attendance tracking and workforce analytics for improved HR management.",
        service_2_feat_1: "✓ Attendance System",
        service_2_feat_2: "✓ Staff Analytics",
        service_2_feat_3: "✓ Performance Tracking",
        
        service_3_title: "Security Solutions",
        service_3_desc: "Intelligent security systems with facial recognition and threat detection capabilities.",
        service_3_feat_1: "✓ Face Recognition",
        service_3_feat_2: "✓ Intrusion Detection",
        service_3_feat_3: "✓ Access Control",
        
        service_4_title: "Visitor Analytics",
        service_4_desc: "Track and analyze visitor patterns to optimize customer experience and operations.",
        service_4_feat_1: "✓ Footfall Analysis",
        service_4_feat_2: "✓ Heat Mapping",
        service_4_feat_3: "✓ Customer Insights",
        
        projects_title_1: "Our",
        projects_title_2: "Projects",
        projects_description: "Delivering impactful solutions across various industries",
        
        project_1_category: "Banking Sector",
        project_1_title: "Agrobank Digital Solutions",
        project_1_desc: "Implemented AI-powered customer service analytics to improve service quality and efficiency.",
        
        project_2_category: "Retail Industry",
        project_2_title: "Retail Analytics Platform",
        project_2_desc: "Deployed comprehensive visitor analytics system for major retail chain.",
        
        project_3_category: "Enterprise Security",
        project_3_title: "Corporate Security System",
        project_3_desc: "Advanced facial recognition and access control for corporate headquarters.",
        
        about_title_1: "About",
        about_text_1: "Fintech Vision Tech specializes in building and deploying state-of-the-art AI products in the computer vision sphere. We combine modern technology to design novel systems that improve efficiency, security, and business intelligence.",
        about_text_2: "Our mission is to make advanced AI technology accessible to businesses of all sizes, helping them harness the power of computer vision to achieve their goals.",
        
        tag_1: "AI Innovation",
        tag_2: "Computer Vision",
        tag_3: "Business Intelligence",
        tag_4: "Security Solutions",
        
        value_1_title: "Our Vision",
        value_1_text: "To be the leading provider of AI-powered computer vision solutions globally.",
        
        value_2_title: "Our Mission",
        value_2_text: "Empowering businesses with intelligent vision technology for a smarter, safer world.",
        
        value_3_title: "Our Values",
        value_3_text: "Innovation, Excellence, Integrity, and Customer Success drive everything we do.",
        
        contact_title_1: "Get in",
        contact_title_2: "Touch",
        contact_description: "Ready to transform your business with AI-powered vision?",
        
        form_name: "Your Name",
        form_email: "Your Email",
        form_subject: "Subject",
        form_message: "Your Message",
        form_submit: "Send Message",
        
        footer_desc: "AI-powered computer vision solutions for modern businesses.",
        footer_quick_links: "Quick Links",
        footer_contact: "Contact",
        footer_copyright: "© 2025 Fintech Vision. All rights reserved."
    },
    
    ru: {
        nav_home: "Наша цель",
        nav_services: "Почему мы?",
        nav_projects: "Проекты",
        nav_about: "О нас",
        nav_roatmap: "Дорожная карта",
        nav_contact: "Контакты",
        nav_get_started: "Начать",
        
        hero_badge: "Решения компьютерного зрения на основе ИИ",
        hero_title_1: "Трансформируйте свой бизнес с",
        hero_title_2: "Интеллектуальным Зрением",
        hero_description: "Передовая технология видеоаналитики и компьютерного зрения для повышения безопасности, эффективности и принятия решений на основе данных.",
        hero_btn_start: "Начать проект",
        hero_btn_learn: "Узнать больше",
        
        stat_accuracy: "Точность",
        stat_monitoring: "Мониторинг",
        stat_clients: "Клиенты",
        stat_hours: "Часов проанализировано",
        
        services_title_1: "Наши",
        services_title_2: "Услуги",
        services_description: "Комплексные решения на базе ИИ, адаптированные под ваш бизнес",
        
        service_1_title: "Видеоаналитика",
        service_1_desc: "Анализ видео на основе ИИ для получения информации в реальном времени и автоматизированных решений мониторинга.",
        service_1_feat_1: "✓ Обнаружение в реальном времени",
        service_1_feat_2: "✓ Отслеживание объектов",
        service_1_feat_3: "✓ Анализ поведения",
        
        service_2_title: "HR Аналитика",
        service_2_desc: "Продвинутое отслеживание посещаемости и аналитика персонала для улучшения управления HR.",
        service_2_feat_1: "✓ Система учета",
        service_2_feat_2: "✓ Аналитика персонала",
        service_2_feat_3: "✓ Отслеживание производительности",
        
        service_3_title: "Решения безопасности",
        service_3_desc: "Интеллектуальные системы безопасности с распознаванием лиц и обнаружением угроз.",
        service_3_feat_1: "✓ Распознавание лиц",
        service_3_feat_2: "✓ Обнаружение вторжений",
        service_3_feat_3: "✓ Контроль доступа",
        
        service_4_title: "Аналитика посетителей",
        service_4_desc: "Отслеживание и анализ поведения посетителей для оптимизации клиентского опыта и операций.",
        service_4_feat_1: "✓ Анализ потока",
        service_4_feat_2: "✓ Тепловые карты",
        service_4_feat_3: "✓ Insights клиентов",
        
        projects_title_1: "Наши",
        projects_title_2: "Проекты",
        projects_description: "Предоставление эффективных решений в различных отраслях",
        
        project_1_category: "Банковский сектор",
        project_1_title: "Цифровые решения Агробанка",
        project_1_desc: "Внедрена аналитика обслуживания клиентов на основе ИИ для повышения качества и эффективности.",
        
        project_2_category: "Розничная торговля",
        project_2_title: "Платформа розничной аналитики",
        project_2_desc: "Развернута комплексная система аналитики посетителей для крупной розничной сети.",
        
        project_3_category: "Корпоративная безопасность",
        project_3_title: "Корпоративная система безопасности",
        project_3_desc: "Продвинутое распознавание лиц и контроль доступа для корпоративной штаб-квартиры.",
        
        about_title_1: "О нас",
        about_text_1: "Fintech Vision Tech специализируется на создании и развертывании передовых продуктов ИИ в сфере компьютерного зрения. Мы объединяем современные технологии для разработки инновационных систем, повышающих эффективность, безопасность и бизнес-аналитику.",
        about_text_2: "Наша миссия - сделать передовые технологии ИИ доступными для бизнеса любого размера, помогая им использовать мощь компьютерного зрения для достижения своих целей.",
        
        tag_1: "ИИ Инновации",
        tag_2: "Компьютерное зрение",
        tag_3: "Бизнес-аналитика",
        tag_4: "Решения безопасности",
        
        value_1_title: "Наше видение",
        value_1_text: "Стать ведущим поставщиком решений компьютерного зрения на основе ИИ в мире.",
        
        value_2_title: "Наша миссия",
        value_2_text: "Расширение возможностей бизнеса с помощью интеллектуальной технологии зрения для более умного и безопасного мира.",
        
        value_3_title: "Наши ценности",
        value_3_text: "Инновации, Совершенство, Честность и Успех клиентов определяют все, что мы делаем.",
        
        contact_title_1: "Свяжитесь",
        contact_title_2: "с нами",
        contact_description: "Готовы трансформировать свой бизнес с помощью ИИ-зрения?",
        
        form_name: "Ваше имя",
        form_email: "Ваш Email",
        form_subject: "Тема",
        form_message: "Ваше сообщение",
        form_submit: "Отправить сообщение",
        
        footer_desc: "Решения компьютерного зрения на основе ИИ для современного бизнеса.",
        footer_quick_links: "Быстрые ссылки",
        footer_contact: "Контакты",
        footer_copyright: "© 2025 Fintech Vision. Все права защищены."
    }
};

// ==================== LANGUAGE SWITCHING ====================
let currentLang = localStorage.getItem('language') || 'en';

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('language', lang);
    
    // Update all elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Update placeholders
    document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (translations[lang] && translations[lang][key]) {
            element.placeholder = translations[lang][key];
        }
    });
    
    // Update active language button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        }
    });
    
    // Update HTML lang attribute
    document.documentElement.lang = lang;
}

// Language button click handlers
document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const lang = btn.getAttribute('data-lang');
        setLanguage(lang);
    });
});

// Initialize language on page load
setLanguage(currentLang);

// ==================== THEME TOGGLE ====================
const themeToggle = document.getElementById('themeToggle');
let currentTheme = localStorage.getItem('theme') || 'dark';

function setTheme(theme) {
    currentTheme = theme;
    localStorage.setItem('theme', theme);
    
    if (theme === 'light') {
        document.body.classList.add('light-mode');
    } else {
        document.body.classList.remove('light-mode');
    }
}

themeToggle.addEventListener('click', () => {
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    setTheme(newTheme);
});

// Initialize theme on page load
setTheme(currentTheme);

// ==================== MOBILE MENU ====================
const mobileMenuBtn = document.getElementById('mobileMenuBtn');
const navMenu = document.querySelector('.nav-menu');

mobileMenuBtn.addEventListener('click', () => {
    navMenu.classList.toggle('active');
});

// Close mobile menu when clicking on a link
document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', () => {
        navMenu.classList.remove('active');
    });
});

// ==================== NAVBAR SCROLL EFFECT ====================
const navbar = document.getElementById('navbar');

window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
        navbar.classList.add('scrolled');
    } else {
        navbar.classList.remove('scrolled');
    }
});

// ==================== SMOOTH SCROLL ====================
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// ==================== ACTIVE NAV LINK ====================
const sections = document.querySelectorAll('section[id]');

function highlightNavLink() {
    const scrollY = window.pageYOffset;

    sections.forEach(section => {
        const sectionHeight = section.offsetHeight;
        const sectionTop = section.offsetTop - 100;
        const sectionId = section.getAttribute('id');
        const navLink = document.querySelector(`.nav-link[href="#${sectionId}"]`);

        if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
            navLink?.classList.add('active');
        } else {
            navLink?.classList.remove('active');
        }
    });
}

window.addEventListener('scroll', highlightNavLink);

// ==================== FORM SUBMISSION ====================
const contactForm = document.querySelector('.contact-form');

if (contactForm) {
    contactForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        const successMessages = {
            uz: "Xabaringiz uchun rahmat! Tez orada siz bilan bog'lanamiz.",
            en: "Thank you for your message! We will get back to you soon.",
            ru: "Спасибо за ваше сообщение! Мы скоро свяжемся с вами."
        };
        
        alert(successMessages[currentLang] || successMessages.en);
        contactForm.reset();
    });
}

// ==================== SCROLL ANIMATIONS ====================
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
        }
    });
}, observerOptions);

// Observe all cards
document.querySelectorAll('.service-card, .project-card, .value-card, .stat-card').forEach(card => {
    card.style.opacity = '0';
    card.style.transform = 'translateY(30px)';
    card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    observer.observe(card);
});

// ==================== COUNTER ANIMATION ====================
function animateCounter(element, target, duration = 2000) {
    const start = 0;
    const increment = target / (duration / 16);
    let current = start;

    const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
            element.textContent = target;
            clearInterval(timer);
        } else {
            element.textContent = Math.floor(current);
        }
    }, 16);
}

const statsObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const statNumbers = entry.target.querySelectorAll('.stat-number');
            statNumbers.forEach(stat => {
                const text = stat.textContent;
                const number = parseInt(text.replace(/\D/g, ''));
                if (number) {
                    stat.textContent = '0';
                    setTimeout(() => {
                        animateCounter(stat, number);
                        setTimeout(() => {
                            if (text.includes('+')) stat.textContent += '+';
                            if (text.includes('%')) stat.textContent += '%';
                            if (text.includes('K')) stat.textContent = Math.floor(number) + 'K+';
                            if (text.includes('/')) stat.textContent = '24/7';
                        }, 2000);
                    }, 100);
                }
            });
            statsObserver.unobserve(entry.target);
        }
    });
}, { threshold: 0.5 });

const statsSection = document.querySelector('.stats');
if (statsSection) {
    statsObserver.observe(statsSection);
}

// ==================== PARALLAX EFFECT ====================
window.addEventListener('scroll', () => {
    const scrolled = window.pageYOffset;
    const heroBlurs = document.querySelectorAll('.hero-blur');
    
    heroBlurs.forEach((blur, index) => {
        const speed = (index + 1) * 0.5;
        blur.style.transform = `translateY(${scrolled * speed}px)`;
    });
});

// ==================== LOADING ANIMATION ====================
window.addEventListener('load', () => {
    document.body.style.opacity = '0';
    document.body.style.transition = 'opacity 0.5s ease';
    setTimeout(() => {
        document.body.style.opacity = '1';
    }, 100);
});